@using DoAnCNPM.Models
@model dynamic

@{
    ViewBag.Title = "Trang chủ";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";

    var categorizedProducts = ViewBag.CategorizedProducts as Dictionary<string, List<SANPHAM>>
                               ?? new Dictionary<string, List<SANPHAM>>();

    var dbCategories = categorizedProducts.Keys.ToList();
}

@*<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>*@

<style>
    body {
        margin: 0;
        font-family: Arial, Helvetica, sans-serif;
        background: #f5f5f5;
    }

    .container {
        width: 1200px;
        margin: auto;
    }

    .main {
        display: grid;
        grid-template-columns: 220px 1fr;
        gap: 15px;
        margin-top: 15px;
    }

    /* ===== SIDEBAR ===== */
    .sidebar {
        background: #fff;
        border-radius: 4px;
        height: fit-content;
    }

        .sidebar h4 {
            margin: 0;
            padding: 10px;
            background: #0a8f3c;
            color: #fff;
            font-size: 14px;
            border-radius: 4px 4px 0 0;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar li {
            padding: 8px 10px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
            cursor: pointer;
        }

            .sidebar li:hover {
                background: #f0f0f0;
            }

    /* ===== BANNER ===== */
    .single-banner {
        margin-bottom: 15px;
        border-radius: 6px;
        overflow: hidden;
    }

        .single-banner img {
            width: 100%;
            display: block;
        }

    /* ===== ICON ROW ===== */
    .icon-row {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 10px;
        margin-bottom: 15px;
    }

    .icon-box {
        background: #fff;
        padding: 10px;
        text-align: center;
        border-radius: 4px;
        font-size: 13px;
    }


    /* ===== CATEGORY SECTION ===== */
    .category-section {
        background: #fff;
        margin-bottom: 20px;
        padding: 15px;
        border-radius: 4px;
    }

    .section-title {
        font-size: 18px;
        font-weight: bold;
        border-bottom: 2px solid #0a8f3c;
        margin-bottom: 10px;
        padding-bottom: 5px;
    }

    .products {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 15px;
    }

    .product {
        border: 1px solid #eee;
        border-radius: 4px;
        padding: 10px;
        font-size: 14px;
        transition: box-shadow .3s;
    }

        .product:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,.1);
        }

        .product img {
            width: 100%;
            height: 150px;
            object-fit: contain;
        }

    .product-name {
        min-height: 40px;
        margin: 5px 0;
    }

    .price {
        color: #e53935;
        font-weight: bold;
    }

    .buy {
        width: 100%;
        background: #0a8f3c;
        color: #fff;
        border: none;
        padding: 7px;
        border-radius: 4px;
        cursor: pointer;
    }

        .buy:hover {
            background: #087330;
        }


</style>
<style>
    /* Định nghĩa nút Thêm vào Giỏ hàng */
    .add-to-cart-btn {
        /* Bố cục cơ bản */
        display: inline-block; /* Quan trọng để áp dụng padding và width */
        padding: 12px 25px;
        text-align: center;
        text-decoration: none; /* Bỏ gạch chân */
        font-weight: bold;
        cursor: pointer;
        /* Màu sắc và viền (Nổi bật màu xanh lá) */
        background-color: #008000; /* Màu nền xanh lá */
        color: white; /* Chữ màu trắng */
        border: none;
        border-radius: 6px; /* Bo góc nhẹ */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Bóng nhẹ */
        /* Hiệu ứng chuyển đổi */
        transition: background-color 0.3s ease, transform 0.1s ease;
        font-size: 16px;
    }

        /* Hiệu ứng khi di chuột vào */
        .add-to-cart-btn:hover {
            background-color: #006400; /* Màu xanh đậm hơn */
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15); /* Bóng rõ hơn */
        }

        /* Hiệu ứng khi nhấn giữ nút */
        .add-to-cart-btn:active {
            background-color: #004d00; /* Màu xanh rất đậm */
            transform: translateY(1px); /* Nút lún xuống 1px */
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
        }
</style>
<div class="container main">

    <!-- SIDEBAR -->
    <div class="sidebar">
        <h4>Danh mục sản phẩm</h4>
        <ul>
            @foreach (var category in dbCategories)
            {
                <li>
                    <a href="@Url.Action("SanPhamTheoLoai", "Home", new { tenLoai = category })" class="category-link">
                        @category
                    </a>
                </li>
            }
        </ul>
    </div>

    <style>
        /* CSS bổ sung để làm đẹp danh mục */
        .sidebar {
            padding: 20px;
            background-color: #f7f7f7;
            border-radius: 8px;
            border: 1px solid #eee;
        }

            .sidebar h4 {
                color: #008000; /* Màu xanh lá cây */
                border-bottom: 2px solid #ddd;
                padding-bottom: 10px;
                margin-bottom: 15px;
                font-size: 18px;
            }

            .sidebar ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            .sidebar li {
                margin-bottom: 5px;
            }

        .category-link {
            text-decoration: none;
            color: #333; /* Màu chữ mặc định */
            display: block;
            padding: 8px 5px;
            transition: background-color 0.2s, color 0.2s;
            border-radius: 4px;
            font-size: 14px;
        }

            .category-link:hover {
                background-color: #e0f2e0; /* Nền xanh nhạt khi hover */
                color: #008000; /* Chữ màu xanh nổi bật */
                font-weight: bold;
            }
    </style>

    <!-- CONTENT -->
    <div>

        <!-- BANNER -->
        <div class="single-banner">
            <a href="###">
                <img src="@Url.Content("~/Images/khuyenmai1.png")" />
            </a>
        </div>

        <!-- ICONS -->
        <!-- PRODUCTS BY CATEGORY -->
        @foreach (var categoryGroup in categorizedProducts)
        {
            <div class="category-section">
                <div class="section-title">@categoryGroup.Key</div>

                <div class="products">
                    @foreach (var product in categoryGroup.Value.Take(8))
                    {
                        <div class="product">
                            <a href="@Url.Action("Details", "Home", new { id = product.MASP })">
                                <img src="@Url.Content("~/Images/" + product.HINH)" alt="@product.TENSP" />
                            </a>
                            <div class="product-name">@product.TENSP</div>
                            <div class="price">@string.Format("{0:N0}đ", product.GIABAN)</div>
                            <a href="@Url.Action("ThemGioHang", "Home", new { id = product.MASP, strURL = Request.Url.ToString() })" class="add-to-cart-btn">
                                🛒 Thêm vào Giỏ hàng
                            </a>
                        </div>
                    }
                </div>
            </div>
        }

    </div>
</div>
