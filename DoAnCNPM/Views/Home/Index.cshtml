@using DoAnCNPM.Models
@model dynamic

@{
    ViewBag.Title = "Trang chủ";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";

    var categorizedProducts = ViewBag.CategorizedProducts as Dictionary<string, List<SANPHAM>>
                               ?? new Dictionary<string, List<SANPHAM>>();

    var dbCategories = categorizedProducts.Keys.ToList();
}

<style>
    body {
        margin: 0;
        font-family: Arial, Helvetica, sans-serif;
        background: #f5f5f5;
    }

    .container {
        width: 1200px;
        margin: auto;
    }

    .main {
        display: grid;
        grid-template-columns: 220px 1fr;
        gap: 15px;
        margin-top: 15px;
    }

    /* ===== SIDEBAR ===== */
    .sidebar {
        background: #fff;
        border-radius: 4px;
        height: fit-content;
    }

        .sidebar h4 {
            margin: 0;
            padding: 10px;
            background: #0a8f3c;
            color: #fff;
            font-size: 14px;
            border-radius: 4px 4px 0 0;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar li {
            padding: 8px 10px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
            cursor: pointer;
        }

            .sidebar li:hover {
                background: #f0f0f0;
            }

    /* ===== BANNER ===== */
    .single-banner {
        margin-bottom: 15px;
        border-radius: 6px;
        overflow: hidden;
    }

        .single-banner img {
            width: 100%;
            display: block;
        }

    /* ===== ICON ROW ===== */
    .icon-row {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 10px;
        margin-bottom: 15px;
    }

    .icon-box {
        background: #fff;
        padding: 10px;
        text-align: center;
        border-radius: 4px;
        font-size: 13px;
    }

    /* ===== CATEGORY SECTION ===== */
    .category-section {
        background: #fff;
        margin-bottom: 20px;
        padding: 15px;
        border-radius: 4px;
    }

    .section-title {
        font-size: 18px;
        font-weight: bold;
        border-bottom: 2px solid #0a8f3c;
        margin-bottom: 10px;
        padding-bottom: 5px;
    }

    .products {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 15px;
    }

    .product {
        border: 1px solid #eee;
        border-radius: 4px;
        padding: 10px;
        font-size: 14px;
        transition: box-shadow .3s;
    }

        .product:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,.1);
        }

        .product img {
            width: 100%;
            height: 150px;
            object-fit: contain;
        }

    .product-name {
        min-height: 40px;
        margin: 5px 0;
    }

    .price {
        color: #e53935;
        font-weight: bold;
    }

    .buy {
        width: 100%;
        background: #0a8f3c;
        color: #fff;
        border: none;
        padding: 7px;
        border-radius: 4px;
        cursor: pointer;
    }

        .buy:hover {
            background: #087330;
        }
</style>

<div class="container main">

    <!-- SIDEBAR -->
    <div class="sidebar">
        <h4>Danh mục sản phẩm</h4>
        <ul>
            @foreach (var category in dbCategories)
            {
                <li>@category</li>
            }
        </ul>
    </div>

    <!-- CONTENT -->
    <div>

        <!-- BANNER -->
        <div class="single-banner">
            <a href="###">
                <img src="@Url.Content("~/Images/khuyenmai1.png")" />
            </a>
        </div>

        <!-- ICONS -->
        <div class="icon-row">
            <div class="icon-box">Khuyến mãi đến 50%</div>
            <div class="icon-box">Miễn phí giao</div>
            <div class="icon-box">Hàng tươi mỗi ngày</div>
            <div class="icon-box">Giá tốt</div>
            <div class="icon-box">Đổi trả dễ dàng</div>
            <div class="icon-box">Chính hãng</div>
        </div>

        <!-- PRODUCTS BY CATEGORY -->
        @foreach (var categoryGroup in categorizedProducts)
        {
            <div class="category-section">
                <div class="section-title">@categoryGroup.Key</div>

                <div class="products">
                    @foreach (var product in categoryGroup.Value.Take(8))
                    {
                        <div class="product">
                            <a href="@Url.Action("Details", "Home", new { id = product.MASP })">
                                <img src="@Url.Content("~/Images/" + product.HINH)" alt="@product.TENSP" />
                            </a>
                            <div class="product-name">@product.TENSP</div>
                            <div class="price">@string.Format("{0:N0}đ", product.GIABAN)</div>
                            <button class="buy">Thêm vào giỏ</button>
                        </div>
                    }
                </div>
            </div>
        }

    </div>
</div>
